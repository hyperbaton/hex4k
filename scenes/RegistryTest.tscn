[gd_scene load_steps=2 format=3 uid="uid://44oa6qu7q6xx"]

[sub_resource type="GDScript" id="GDScript_db6pf"]
script/source = "extends Node

# Test script to verify all registry loading works

var registry: RegistryManager

func _ready():
	print(\"\\n=== Starting Registry Load Test ===\\n\")
	
	# Create registry manager (it's RefCounted, not a Node)
	registry = RegistryManager.new()
	
	# Load all data
	registry.load_all_data()
	
	print(\"\\n=== Testing Data Access ===\\n\")
	
	# Test terrain
	var grassland = registry.terrain.get_terrain(\"grassland\")
	print(\"Grassland data: \", grassland)
	print(\"Grassland name: \", registry.get_localized_name(\"terrain\", \"grassland\"))
	
	# Test resources
	var food = registry.resource.get_resource(\"food\")
	print(\"\\nFood data: \", food)
	print(\"Food name: \", registry.get_localized_name(\"resource\", \"food\"))
	print(\"Food is storable: \", registry.resource.is_storable(\"food\"))
	
	# Test buildings
	var farm = registry.building.get_building(\"farm\")
	print(\"\\nFarm data: \", farm)
	print(\"Farm name: \", registry.get_localized_name(\"building\", \"farm\"))
	print(\"Farm admin cost at distance 3: \", registry.building.get_admin_cost(\"farm\", 3))
	
	# Test tech
	var agriculture = registry.tech.get_branch(\"agriculture\")
	print(\"\\nAgriculture branch data: \", agriculture)
	print(\"Agriculture name: \", registry.get_localized_name(\"tech_branch\", \"agriculture\"))
	
	var milestone = registry.tech.get_milestone(\"agriculture_1\")
	print(\"\\nMilestone agriculture_1 data: \", milestone)
	
	# Test adding research
	print(\"\\n=== Testing Research System ===\\n\")
	print(\"Initial Agriculture progress: \", registry.tech.get_branch_progress(\"agriculture\"))
	registry.tech.add_research(\"agriculture\", 3.0)
	print(\"After adding 3.0: \", registry.tech.get_branch_progress(\"agriculture\"))
	print(\"Unlocked milestones: \", registry.tech.get_unlocked_milestones())
	
	print(\"\\n=== Registry Load Test Complete ===\\n\")
"

[node name="RegistryTest" type="Node"]
script = SubResource("GDScript_db6pf")
